"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1040],{633:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(2115);let l=r.forwardRef(function(e,t){let{title:a,titleId:l,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},s),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))})},707:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(2115);let l=r.forwardRef(function(e,t){let{title:a,titleId:l,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},s),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))})},1040:(e,t,a)=>{a.d(t,{A:()=>v});var r=a(5155),l=a(2115),s=a(63),o=a(2619),n=a.n(o),i=a(707),c=a(2019),d=a(633),m=a(6696),g=a(367),u=a(6473),h=a(460),x=a(9749),p=a(1962);let b={_id:"",name:"",volume:"",price:"",cost:"",category:"",stock:"",sku:"",image:"",showInPos:!0,soldBy:"piece"};function v(e){var t;let{initialProduct:a,categories:o=[],id:v}=e,{settings:y}=(0,x.t)(),f=(null==y?void 0:y.currency)==="USD"?"$":(null==y?void 0:y.currency)==="EUR"?"€":"₱",w=(0,s.useRouter)(),j=!!a&&!!a._id,[N,k]=(0,l.useState)(b),[P,C]=(0,l.useState)(!1),[S,A]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(a){var e,t,r,l;let s="";a.category&&("string"==typeof a.category?s=a.category:"object"==typeof a.category&&(null==(e=a.category)?void 0:e._id)&&(s=a.category._id)),k({...b,...a,category:s,stock:null!=(t=a.stock)?t:"",showInPos:null==(r=a.showInPos)||r,soldBy:null!=(l=a.soldBy)?l:"piece"})}},[a]);let E=(0,l.useCallback)(e=>{let{name:t,value:a,type:r}=e.target,l=e.target.checked,s="number"===r?(0,p.i)(a):a;k(e=>{let a={...e,[t]:"checkbox"===r?l:s};if(("price"===t||"volume"===t||"soldBy"===t)&&"weight/volume"===a.soldBy){let e=parseFloat(a.price.toString()),t=a.volume.toString().match(/^(\d+(\.\d+)?)/),r=t?parseFloat(t[0]):0;isNaN(e)||isNaN(r)||!(r>0)||(a.cost=(e/r).toFixed(4))}return a})},[]),L=async e=>{if(e.preventDefault(),!P){C(!0),A(null);try{let e="/api";if(!e)throw Error("API URL is not configured.");let t=j?"".concat(e,"/products/").concat(N._id):"".concat(e,"/products"),{_id:a,...r}=N,l={...r,price:String(r.price||0),cost:parseFloat(String(r.cost||0)).toFixed(4),stock:""===r.stock||void 0===r.stock||null===r.stock?0:Number(r.stock)},s=await fetch(t,{method:j?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});if(!s.ok){let e=await s.json().catch(()=>({message:"Server error"})),t=e.details||e.message||"Failed with status ".concat(s.status);throw Error(t)}w.push("/admin/products"),w.refresh()}catch(t){console.error("Product Save Error:",t);let e="An unknown error occurred while saving.";t instanceof Error&&(e=t.message),A(e),C(!1)}}};return(0,r.jsxs)("form",{id:v,onSubmit:L,className:"bg-white rounded-xl shadow-md border border-gray-100 p-6 space-y-6",children:[S&&(0,r.jsxs)("div",{className:"p-4 bg-red-50 text-red-700 rounded-lg text-sm border border-red-200 flex items-center gap-2",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-1.72 6.97a.75.75 0 10-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 101.06 1.06L12 13.06l1.72 1.72a.75.75 0 101.06-1.06L13.06 12l1.72-1.72a.75.75 0 10-1.06-1.06L12 10.94l-1.72-1.72z",clipRule:"evenodd"})}),S]}),(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,r.jsxs)("div",{className:"flex-1 space-y-6",children:[(0,r.jsx)("div",{className:"grid grid-cols-1 gap-6",children:(0,r.jsx)("label",{className:"block",children:(0,r.jsx)(u.A,{label:"Name",name:"name",value:N.name,onChange:E,placeholder:"e.g. Latte",required:!0})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)("label",{className:"block",children:(0,r.jsx)(u.A,{label:"SKU",name:"sku",value:N.sku,onChange:E,placeholder:"e.g. COF-LT-01"})}),(0,r.jsx)("div",{children:(0,r.jsx)(g.A,{label:"Category",value:N.category,onChange:e=>k(t=>({...t,category:String(e)})),options:(0,h.F)(o).map(e=>({label:e.label,value:e.value})),placeholder:"Select a category..."})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("label",{className:"block",children:[(0,r.jsxs)("span",{className:"text-xs font-medium text-gray-700 flex items-center gap-2 mb-1.5",children:[(0,r.jsx)(i.A,{className:"w-4 h-4 text-gray-500"})," Price *"]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:f}),(0,r.jsx)("input",{type:"number",name:"price",value:""===N.price?"":Number(N.price).toString(),onChange:E,min:"0.00",step:"0.01",className:"w-full border border-gray-200 rounded-lg pl-7 pr-3 py-2 text-sm focus:ring-2 focus:ring-lime-500/20 focus:border-lime-500 transition outline-none"})]})]}),(0,r.jsx)("label",{className:"block",children:(0,r.jsx)(u.A,{label:"Volume / Weight",name:"volume",value:N.volume,onChange:E,placeholder:"e.g. 250ml"})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsx)("label",{className:"block",children:(0,r.jsx)(g.A,{label:"Sold By",value:N.soldBy,onChange:e=>{E({target:{name:"soldBy",value:e,type:"select-one"}})},options:[{label:"Piece (Count)",value:"piece"},{label:"Weight / Volume",value:"weight/volume"}]})}),(0,r.jsxs)("label",{className:"block",children:[(0,r.jsxs)("span",{className:"text-xs font-medium text-gray-700 flex items-center gap-2 mb-1.5",children:[(0,r.jsx)(c.A,{className:"w-4 h-4 text-gray-500"})," Cost *"]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:f}),(0,r.jsx)("input",{type:"number",name:"cost",value:""===N.cost?"":Number(N.cost).toString(),onChange:E,min:"0.00",step:"0.0001",className:"w-full border border-gray-200 rounded-lg pl-7 pr-3 py-2 text-sm focus:ring-2 focus:ring-lime-500/20 focus:border-lime-500 transition outline-none"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-end gap-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,r.jsxs)("label",{className:"block flex-1",children:[(0,r.jsxs)("span",{className:"text-xs font-medium text-gray-700 flex items-center gap-2 mb-1.5",children:[(0,r.jsx)(d.A,{className:"w-4 h-4 text-gray-500"})," Stock"]}),(0,r.jsx)("input",{type:"number",name:"stock",value:null!=(t=N.stock)?t:"",readOnly:!0,className:"w-full border border-gray-200 rounded-lg px-3 py-2 text-sm bg-gray-100 text-gray-500 cursor-not-allowed outline-none"})]}),(0,r.jsx)(n(),{href:"/admin/inventory",className:"mb-px px-4 py-2 bg-white border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition shadow-sm whitespace-nowrap",children:"Manage Inventory"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[(0,r.jsxs)("div",{className:"relative inline-block w-12 mr-2 align-middle select-none transition duration-200 ease-in",children:[(0,r.jsx)("input",{type:"checkbox",name:"showInPos",id:"showInPos",checked:N.showInPos,onChange:E,className:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer transition-transform duration-200 ease-in-out checked:translate-x-full checked:border-lime-500",style:{top:"2px",left:"2px"}}),(0,r.jsx)("label",{htmlFor:"showInPos",className:"toggle-label block overflow-hidden h-7 rounded-full cursor-pointer transition-colors duration-200 ".concat(N.showInPos?"bg-lime-500":"bg-gray-300")})]}),(0,r.jsxs)("label",{htmlFor:"showInPos",className:"text-sm font-medium text-gray-700 cursor-pointer select-none",children:["Show in POS System",(0,r.jsx)("span",{className:"block text-xs text-gray-500 font-normal mt-0.5",children:"If disabled, this product will be hidden from the Point of Sale interface."})]})]})]}),(0,r.jsx)("div",{className:"w-full lg:w-1/4 space-y-4",children:(0,r.jsxs)("label",{className:"block",children:[(0,r.jsxs)("span",{className:"text-xs font-medium text-gray-700 flex items-center gap-2 mb-1.5",children:[(0,r.jsx)(m.A,{className:"w-4 h-4 text-gray-500"})," Product Image"]}),(0,r.jsx)("div",{className:"w-full aspect-square bg-gray-50 border-2 border-dashed border-gray-300 rounded-xl flex flex-col items-center justify-center overflow-hidden mb-3 relative group",children:N.image?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("img",{src:N.image,alt:"Product Preview",className:"w-full h-full object-cover",onError:e=>{e.target.src="https://via.placeholder.com/300?text=Invalid+Image+URL"}}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-xs font-medium bg-black/50 px-2 py-1 rounded",children:"Preview"})})]}):(0,r.jsxs)("div",{className:"text-center p-4 text-gray-400",children:[(0,r.jsx)(m.A,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),(0,r.jsx)("span",{className:"text-xs",children:"No image URL provided"})]})}),(0,r.jsx)(u.A,{name:"image",value:N.image,onChange:E,placeholder:"https://example.com/image.jpg"}),(0,r.jsx)("p",{className:"text-[10px] text-gray-400 mt-1",children:"Paste a direct link to an image (JPG, PNG, WebP)."})]})})]}),!v&&(0,r.jsxs)("div",{className:"pt-6 flex justify-end gap-3 border-t border-gray-100 mt-6",children:[(0,r.jsx)("button",{type:"button",onClick:()=>w.back(),className:"px-5 py-2.5 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 hover:text-gray-800 transition font-medium",disabled:P,children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"px-6 py-2.5 text-white font-semibold rounded-lg shadow-sm transition-all\n                            ".concat(P?"bg-lime-500 cursor-not-allowed":"bg-lime-500 hover:bg-lime-600 hover:shadow-md active:transform active:scale-95"),disabled:P,children:P?"Saving...":j?"Update Product":"Create Product"})]})]})}},2019:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(2115);let l=r.forwardRef(function(e,t){let{title:a,titleId:l,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},s),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))})},6696:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(2115);let l=r.forwardRef(function(e,t){let{title:a,titleId:l,...s}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},s),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))})}}]);