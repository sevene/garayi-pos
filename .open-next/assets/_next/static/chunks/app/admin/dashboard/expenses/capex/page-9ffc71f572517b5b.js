(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3265],{367:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(5155),a=r(2115),s=r(7650),l=r(5748),o=r(6059);function i(e){let{options:t,value:r,onChange:i,placeholder:c="Select an option",label:d,className:u="",disabled:m=!1,required:x=!1,error:h=!1,name:p,id:g}=e,[y,f]=(0,a.useState)(!1),v=(0,a.useRef)(null),b=(0,a.useRef)(null),[w,j]=(0,a.useState)({top:0,left:0,width:0}),N=g||p,E=()=>{if(v.current){let e=v.current.getBoundingClientRect();j({top:e.bottom+window.scrollY,left:e.left+window.scrollX,width:e.width})}};(0,a.useEffect)(()=>{let e=e=>{let t=e.target,r=v.current&&v.current.contains(t),n=b.current&&b.current.contains(t);r||n||f(!1)},t=e=>{let t=e.target;y&&b.current&&!b.current.contains(t)&&f(!1)},r=()=>{y&&E()};return document.addEventListener("mousedown",e),window.addEventListener("scroll",t,!0),window.addEventListener("resize",r),()=>{document.removeEventListener("mousedown",e),window.removeEventListener("scroll",t,!0),window.removeEventListener("resize",r)}},[y]),(0,a.useEffect)(()=>{y&&E()},[y]);let k=t.find(e=>e.value===r),C=(0,n.jsx)("div",{ref:b,className:"fixed z-9999 bg-white shadow-xl rounded-lg text-base ring-1 ring-gray-200 ring-opacity-5 overflow-hidden focus:outline-none sm:text-sm mt-1",style:{top:w.top,left:w.left,width:w.width},children:(0,n.jsx)("div",{className:"max-h-60 overflow-auto py-1",children:0===t.length?(0,n.jsx)("div",{className:"cursor-default select-none relative py-2 px-3 text-gray-500 text-center",children:"No options available."}):t.map(e=>(0,n.jsxs)("div",{className:"cursor-pointer select-none relative py-2 pl-3 pr-9 text-left hover:bg-lime-50 transition-colors ".concat(r===e.value?"bg-lime-50 text-lime-900 font-medium":"text-neutral-500"),onClick:t=>{t.stopPropagation(),i(e.value),f(!1)},children:[(0,n.jsx)("span",{className:"block truncate",children:e.label}),r===e.value&&(0,n.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-4 text-lime-600",children:(0,n.jsx)(l.A,{className:"h-5 w-5","aria-hidden":"true"})})]},e.value))})});return(0,n.jsxs)("div",{className:"relative w-full ".concat(u),ref:v,children:[d&&(0,n.jsxs)("label",{htmlFor:N,className:"block text-sm font-medium text-gray-700 mb-1",children:[d,x&&(0,n.jsx)("span",{className:"text-red-500 ml-0.5",children:"*"})]}),(0,n.jsxs)("button",{id:N,type:"button",onClick:()=>!m&&f(!y),disabled:m,className:"w-full flex items-center justify-between px-3 py-2 border rounded-lg bg-white text-left text-sm transition-all\n                    ".concat(m?"bg-gray-50 text-gray-400 cursor-not-allowed":"cursor-pointer","\n                    ").concat(h?" ring-2 ring-red-500/20 border-red-300 bg-red-50 hover:border-red-400":"border-gray-200 hover:border-gray-300","\n                    ").concat(y?"ring-2 ring-lime-500/20 border-lime-500 outline-none":"","\n                "),children:[(0,n.jsx)("span",{className:"block truncate ".concat(k?"text-gray-900":"text-gray-400"),children:k?k.label:c}),(0,n.jsx)(o.A,{className:"w-5 h-5 text-gray-400 transition-transform ".concat(y?"rotate-180":"")})]}),y&&!m&&"undefined"!=typeof document&&(0,s.createPortal)(C,document.body)]})}},2062:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(2115);let a=n.forwardRef(function(e,t){let{title:r,titleId:a,...s}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Z"}))})},3598:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var n=r(5155),a=r(2115),s=r(7218),l=r(9554),o=r(2062),i=r(4932),c=r(9749),d=r(367),u=r(6473);function m(){let e="/api",{formatCurrency:t}=(0,c.t)(),[r,m]=(0,a.useState)([]),[x,h]=(0,a.useState)(!0),[p,g]=(0,a.useState)(!1),[y,f]=(0,a.useState)({description:"",amount:"",category:"Equipment",date:(0,i.GP)(new Date,"yyyy-MM-dd"),notes:""}),v=async()=>{if(e){h(!0);try{let t=await fetch("".concat(e,"/expenses?type=capex"));if(t.ok){let e=await t.json();m(e)}}catch(e){console.error("Error fetching expenses:",e)}finally{h(!1)}}};(0,a.useEffect)(()=>{v()},[e]);let b=async t=>{if(confirm("Are you sure you want to delete this expense?"))try{(await fetch("".concat(e,"/expenses/").concat(t),{method:"DELETE"})).ok&&v()}catch(e){console.error("Error deleting expense:",e)}},w=async t=>{t.preventDefault();try{let t={...y,amount:parseFloat(y.amount),type:"capex"};(await fetch("".concat(e,"/expenses"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&(g(!1),f({description:"",amount:"",category:"Equipment",date:(0,i.GP)(new Date,"yyyy-MM-dd"),notes:""}),v())}catch(e){console.error("Error saving expense:",e)}};return(0,n.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-500",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"Capital Expenditures (CapEx)"}),(0,n.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Track long-term investments and assets."})]}),(0,n.jsxs)("button",{onClick:()=>g(!0),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 shadow-sm transition-colors",children:[(0,n.jsx)(s.A,{className:"w-5 h-5"}),"Record CapEx"]})]}),(0,n.jsx)("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden",children:(0,n.jsx)("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,n.jsx)("thead",{className:"bg-gray-50 text-gray-500 font-medium border-b border-gray-100",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"px-6 py-3",children:"Date"}),(0,n.jsx)("th",{className:"px-6 py-3",children:"Description"}),(0,n.jsx)("th",{className:"px-6 py-3",children:"Category"}),(0,n.jsx)("th",{className:"px-6 py-3 text-right",children:"Amount"}),(0,n.jsx)("th",{className:"px-6 py-3 text-center",children:"Actions"})]})}),(0,n.jsxs)("tbody",{className:"divide-y divide-gray-100",children:[r.map(e=>(0,n.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,n.jsx)("td",{className:"px-6 py-4 text-gray-600",children:(0,i.GP)(new Date(e.date),"MMM dd, yyyy")}),(0,n.jsxs)("td",{className:"px-6 py-4 font-medium text-gray-800",children:[e.description,e.notes&&(0,n.jsx)("p",{className:"text-xs text-gray-400 font-normal",children:e.notes})]}),(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsx)("span",{className:"px-2 py-1 rounded-full bg-purple-50 text-purple-600 text-xs border border-purple-100",children:e.category})}),(0,n.jsx)("td",{className:"px-6 py-4 text-right font-bold text-gray-800",children:t(e.amount)}),(0,n.jsx)("td",{className:"px-6 py-4 text-center",children:(0,n.jsx)("button",{onClick:()=>b(e._id),className:"text-gray-400 hover:text-red-500 transition-colors",children:(0,n.jsx)(l.A,{className:"w-4 h-4"})})})]},e._id)),0===r.length&&!x&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:5,className:"px-6 py-10 text-center text-gray-400",children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,n.jsx)(o.A,{className:"w-8 h-8 opacity-20"}),(0,n.jsx)("p",{children:"No CapEx records found."})]})})})]})]})})}),p&&(0,n.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6 animate-in zoom-in-95 duration-200",children:[(0,n.jsx)("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Record New CapEx"}),(0,n.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,n.jsx)("div",{children:(0,n.jsx)(u.A,{label:"Description",name:"description",required:!0,placeholder:"e.g. New Coffee Machine",value:y.description,onChange:e=>f({...y,description:e.target.value})})}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsx)("div",{children:(0,n.jsx)(u.A,{label:"Amount",name:"amount",type:"number",required:!0,min:0,step:.01,placeholder:"0.00",value:y.amount,onChange:e=>f({...y,amount:e.target.value})})}),(0,n.jsx)("div",{children:(0,n.jsx)(u.A,{label:"Date",name:"date",type:"date",required:!0,value:y.date,onChange:e=>f({...y,date:e.target.value})})})]}),(0,n.jsx)("div",{children:(0,n.jsx)(d.A,{label:"Category",name:"category",options:["Equipment","Renovation","Vehicles","Software","Furniture","Other"].map(e=>({value:e,label:e})),value:y.category,onChange:e=>f({...y,category:e})})}),(0,n.jsx)("div",{children:(0,n.jsx)(u.A,{label:"Notes (Optional)",name:"notes",multiline:!0,placeholder:"Additional details...",value:y.notes,onChange:e=>f({...y,notes:e.target.value})})}),(0,n.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,n.jsx)("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-gray-600 hover:bg-gray-100 rounded-lg",children:"Cancel"}),(0,n.jsx)("button",{type:"submit",className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg shadow-sm",children:"Save CapEx"})]})]})]})})]})}},5748:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(2115);let a=n.forwardRef(function(e,t){let{title:r,titleId:a,...s}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))})},6059:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(2115);let a=n.forwardRef(function(e,t){let{title:r,titleId:a,...s}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))})},6473:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(5155);function a(e){let{label:t,className:r="",error:a=!1,disabled:s=!1,required:l=!1,multiline:o=!1,id:i,...c}=e,d=i||c.name;return(0,n.jsxs)("div",{className:"w-full ".concat(r),children:[t&&(0,n.jsxs)("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700 mb-1",children:[t,l&&(0,n.jsx)("span",{className:"text-red-500 ml-0.5",children:"*"})]}),o?(0,n.jsx)("textarea",{id:d,disabled:s,required:l,className:"\n                        w-full px-3 py-2 text-sm border rounded-lg outline-none transition-all duration-200\n                        text-gray-900 placeholder-gray-400 min-h-20 resize-y\n                        ".concat(s?"bg-gray-50 text-gray-400 cursor-not-allowed border-gray-200":"bg-white","\n                        ").concat(a?"border-red-300 ring-4 ring-red-500/10 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 hover:border-gray-300 focus:border-lime-500 focus:ring-4 focus:ring-lime-500/10","\n                    "),...c}):(0,n.jsx)("input",{id:d,disabled:s,required:l,className:"\n                        w-full px-3 py-2 text-sm border rounded-lg outline-none transition-all duration-200\n                        text-gray-900 placeholder-gray-400\n                        ".concat(s?"bg-gray-50 text-gray-400 cursor-not-allowed border-gray-200":"bg-white","\n                        ").concat(a?"border-red-300 ring-4 ring-red-500/10 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 hover:border-gray-300 focus:border-lime-500 focus:ring-4 focus:ring-lime-500/10","\n                    "),...c})]})}r(2115)},7218:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(2115);let a=n.forwardRef(function(e,t){let{title:r,titleId:a,...s}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))})},9444:(e,t,r)=>{Promise.resolve().then(r.bind(r,3598))},9554:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(2115);let a=n.forwardRef(function(e,t){let{title:r,titleId:a,...s}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},s),r?n.createElement("title",{id:a},r):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))})},9749:(e,t,r)=>{"use strict";r.d(t,{t:()=>a});var n=r(2115);let a=()=>{let[e,t]=(0,n.useState)(null),[r,a]=(0,n.useState)(!0),[s,l]=(0,n.useState)(null),o="/api";return(0,n.useEffect)(()=>{(async()=>{if(!o)return a(!1);try{let a=await fetch("".concat(o,"/settings"));if(a.ok){var e,r,n,s,i,c,d;let l=await a.json();t({storeName:l.name||"",storeAddress:(null==(e=l.address)?void 0:e.street)||"",currency:l.currency||"PHP",taxRate:void 0!==l.tax_rate?Number(l.tax_rate):.08,enableNotifications:null==(d=null==(r=l.settings)?void 0:r.enableNotifications)||d,receiptHeader:(null==(n=l.receipt)?void 0:n.header)||"",receiptFooter:(null==(s=l.receipt)?void 0:s.footer)||"",printerName:(null==(i=l.receipt)?void 0:i.printerName)||"",theme:(null==(c=l.settings)?void 0:c.theme)||"light"})}else l("Failed to fetch settings")}catch(e){console.error(e),l("Error fetching settings")}finally{a(!1)}})()},[o]),{settings:e,loading:r,error:s,formatCurrency:t=>{let r=(null==e?void 0:e.currency)==="USD"?"$":(null==e?void 0:e.currency)==="EUR"?"€":"₱";return"".concat(r).concat(t.toFixed(2))},getCurrencySymbol:()=>e?"USD"===e.currency?"$":"EUR"===e.currency?"€":"₱":"₱"}}}},e=>{e.O(0,[4932,8441,1255,7358],()=>e(e.s=9444)),_N_E=e.O()}]);