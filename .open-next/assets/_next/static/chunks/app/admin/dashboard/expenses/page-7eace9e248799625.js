(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2339],{367:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(5155),n=r(2115),s=r(7650),l=r(5748),o=r(6059);function i(e){let{options:t,value:r,onChange:i,placeholder:c="Select an option",label:d,className:m="",disabled:u=!1,required:x=!1,error:h=!1,name:p,id:g}=e,[y,f]=(0,n.useState)(!1),v=(0,n.useRef)(null),b=(0,n.useRef)(null),[w,j]=(0,n.useState)({top:0,left:0,width:0}),N=g||p,E=()=>{if(v.current){let e=v.current.getBoundingClientRect();j({top:e.bottom+window.scrollY,left:e.left+window.scrollX,width:e.width})}};(0,n.useEffect)(()=>{let e=e=>{let t=e.target,r=v.current&&v.current.contains(t),a=b.current&&b.current.contains(t);r||a||f(!1)},t=e=>{let t=e.target;y&&b.current&&!b.current.contains(t)&&f(!1)},r=()=>{y&&E()};return document.addEventListener("mousedown",e),window.addEventListener("scroll",t,!0),window.addEventListener("resize",r),()=>{document.removeEventListener("mousedown",e),window.removeEventListener("scroll",t,!0),window.removeEventListener("resize",r)}},[y]),(0,n.useEffect)(()=>{y&&E()},[y]);let k=t.find(e=>e.value===r),A=(0,a.jsx)("div",{ref:b,className:"fixed z-9999 bg-white shadow-xl rounded-lg text-base ring-1 ring-gray-200 ring-opacity-5 overflow-hidden focus:outline-none sm:text-sm mt-1",style:{top:w.top,left:w.left,width:w.width},children:(0,a.jsx)("div",{className:"max-h-60 overflow-auto py-1",children:0===t.length?(0,a.jsx)("div",{className:"cursor-default select-none relative py-2 px-3 text-gray-500 text-center",children:"No options available."}):t.map(e=>(0,a.jsxs)("div",{className:"cursor-pointer select-none relative py-2 pl-3 pr-9 text-left hover:bg-lime-50 transition-colors ".concat(r===e.value?"bg-lime-50 text-lime-900 font-medium":"text-neutral-500"),onClick:t=>{t.stopPropagation(),i(e.value),f(!1)},children:[(0,a.jsx)("span",{className:"block truncate",children:e.label}),r===e.value&&(0,a.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-4 text-lime-600",children:(0,a.jsx)(l.A,{className:"h-5 w-5","aria-hidden":"true"})})]},e.value))})});return(0,a.jsxs)("div",{className:"relative w-full ".concat(m),ref:v,children:[d&&(0,a.jsxs)("label",{htmlFor:N,className:"block text-sm font-medium text-gray-700 mb-1",children:[d,x&&(0,a.jsx)("span",{className:"text-red-500 ml-0.5",children:"*"})]}),(0,a.jsxs)("button",{id:N,type:"button",onClick:()=>!u&&f(!y),disabled:u,className:"w-full flex items-center justify-between px-3 py-2 border rounded-lg bg-white text-left text-sm transition-all\n                    ".concat(u?"bg-gray-50 text-gray-400 cursor-not-allowed":"cursor-pointer","\n                    ").concat(h?" ring-2 ring-red-500/20 border-red-300 bg-red-50 hover:border-red-400":"border-gray-200 hover:border-gray-300","\n                    ").concat(y?"ring-2 ring-lime-500/20 border-lime-500 outline-none":"","\n                "),children:[(0,a.jsx)("span",{className:"block truncate ".concat(k?"text-gray-900":"text-gray-400"),children:k?k.label:c}),(0,a.jsx)(o.A,{className:"w-5 h-5 text-gray-400 transition-transform ".concat(y?"rotate-180":"")})]}),y&&!u&&"undefined"!=typeof document&&(0,s.createPortal)(A,document.body)]})}},2019:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2115);let n=a.forwardRef(function(e,t){let{title:r,titleId:n,...s}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))})},2062:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2115);let n=a.forwardRef(function(e,t){let{title:r,titleId:n,...s}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 21h19.5m-18-18v18m10.5-18v18m6-13.5V21M6.75 6.75h.75m-.75 3h.75m-.75 3h.75m3-6h.75m-.75 3h.75m-.75 3h.75M6.75 21v-3.375c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21M3 3h12m-.75 4.5H21m-3.75 3.75h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Zm0 3h.008v.008h-.008v-.008Z"}))})},5748:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2115);let n=a.forwardRef(function(e,t){let{title:r,titleId:n,...s}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))})},6059:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2115);let n=a.forwardRef(function(e,t){let{title:r,titleId:n,...s}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))})},6473:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(5155);function n(e){let{label:t,className:r="",error:n=!1,disabled:s=!1,required:l=!1,multiline:o=!1,id:i,...c}=e,d=i||c.name;return(0,a.jsxs)("div",{className:"w-full ".concat(r),children:[t&&(0,a.jsxs)("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700 mb-1",children:[t,l&&(0,a.jsx)("span",{className:"text-red-500 ml-0.5",children:"*"})]}),o?(0,a.jsx)("textarea",{id:d,disabled:s,required:l,className:"\n                        w-full px-3 py-2 text-sm border rounded-lg outline-none transition-all duration-200\n                        text-gray-900 placeholder-gray-400 min-h-20 resize-y\n                        ".concat(s?"bg-gray-50 text-gray-400 cursor-not-allowed border-gray-200":"bg-white","\n                        ").concat(n?"border-red-300 ring-4 ring-red-500/10 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 hover:border-gray-300 focus:border-lime-500 focus:ring-4 focus:ring-lime-500/10","\n                    "),...c}):(0,a.jsx)("input",{id:d,disabled:s,required:l,className:"\n                        w-full px-3 py-2 text-sm border rounded-lg outline-none transition-all duration-200\n                        text-gray-900 placeholder-gray-400\n                        ".concat(s?"bg-gray-50 text-gray-400 cursor-not-allowed border-gray-200":"bg-white","\n                        ").concat(n?"border-red-300 ring-4 ring-red-500/10 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 hover:border-gray-300 focus:border-lime-500 focus:ring-4 focus:ring-lime-500/10","\n                    "),...c})]})}r(2115)},7048:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var a=r(5155),n=r(2115),s=r(2019),l=r(2062),o=r(7218),i=r(9554),c=r(4932),d=r(9749),m=r(367),u=r(6473);function x(){let e="/api",{formatCurrency:t}=(0,d.t)(),[r,x]=(0,n.useState)("opex"),[h,p]=(0,n.useState)([]),[g,y]=(0,n.useState)(!0),[f,v]=(0,n.useState)({description:"",amount:"",category:"",date:(0,c.GP)(new Date,"yyyy-MM-dd"),notes:""}),b="opex"===r?["Rent","Utilities","Supplies","Maintenance","Salary","Marketing","Other"]:["Equipment","Renovation","Vehicles","Software","Furniture","Other"];(0,n.useEffect)(()=>{w(),v(e=>({...e,category:"opex"===r?"Rent":"Equipment"}))},[r,e]);let w=async()=>{if(e){y(!0);try{let t=await fetch("".concat(e,"/expenses?type=").concat(r));if(t.ok){let e=await t.json();p(e)}}catch(e){console.error("Error fetching expenses:",e)}finally{y(!1)}}},j=async t=>{t.preventDefault();try{let t={...f,amount:parseFloat(f.amount),type:r};(await fetch("".concat(e,"/expenses"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})).ok&&(v({description:"",amount:"",category:"opex"===r?"Rent":"Equipment",date:(0,c.GP)(new Date,"yyyy-MM-dd"),notes:""}),w())}catch(e){console.error("Error saving expense:",e)}},N=async t=>{if(confirm("Are you sure you want to delete this record?"))try{(await fetch("".concat(e,"/expenses/").concat(t),{method:"DELETE"})).ok&&w()}catch(e){console.error("Error deleting expense:",e)}};return(0,a.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-1000 lg:px-6 lg:pb-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Expenses"}),(0,a.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Manage operating costs and capital investments."})]}),(0,a.jsxs)("div",{className:"bg-gray-100 p-1.5 rounded-xl inline-flex self-start md:self-center",children:[(0,a.jsx)("button",{onClick:()=>x("opex"),className:"px-6 py-2 rounded-lg text-sm font-semibold transition-all duration-300 ".concat("opex"===r?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-200/50"),children:"OpEx"}),(0,a.jsx)("button",{onClick:()=>x("capex"),className:"px-6 py-2 rounded-lg text-sm font-semibold transition-all duration-300 ".concat("capex"===r?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700 hover:bg-gray-200/50"),children:"CapEx"})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 md:p-8",children:(0,a.jsxs)("form",{onSubmit:j,children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-lg ".concat("opex"===r?"bg-lime-100 text-lime-600":"bg-purple-100 text-purple-600"),children:"opex"===r?(0,a.jsx)(s.A,{className:"w-5 h-5"}):(0,a.jsx)(l.A,{className:"w-5 h-5"})}),(0,a.jsxs)("h2",{className:"text-lg font-bold text-gray-900",children:["Record ","opex"===r?"Operating Expense":"Capital Expenditure"]})]}),(0,a.jsxs)("button",{type:"submit",className:"h-11 px-6 rounded-xl font-semibold text-white shadow-sm transition-all active:scale-95 flex items-center gap-2\n                                ".concat("opex"===r?"bg-lime-600 hover:bg-lime-700":"bg-purple-600 hover:bg-purple-700"),children:[(0,a.jsx)(o.A,{className:"w-5 h-5"}),"Add Record"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 items-start",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)(u.A,{label:"Description",name:"description",placeholder:"opex"===r?"e.g. Electricity Bill":"e.g. New Equipment",required:!0,value:f.description,onChange:e=>v({...f,description:e.target.value})})}),(0,a.jsx)("div",{children:(0,a.jsx)(m.A,{label:"Category",name:"category",options:b.map(e=>({value:e,label:e})),value:f.category,onChange:e=>v({...f,category:e})})}),(0,a.jsx)("div",{children:(0,a.jsx)(u.A,{label:"Amount",name:"amount",type:"number",required:!0,min:0,step:.01,placeholder:"0.00",value:f.amount,onChange:e=>v({...f,amount:e.target.value})})}),(0,a.jsx)("div",{children:(0,a.jsx)(u.A,{label:"Date",name:"date",type:"date",required:!0,value:f.date,onChange:e=>v({...f,date:e.target.value})})})]}),(0,a.jsx)("div",{className:"mt-5",children:(0,a.jsx)(u.A,{label:"Notes (Optional)",name:"notes",multiline:!0,placeholder:"...",value:f.notes,onChange:e=>v({...f,notes:e.target.value})})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,a.jsx)("thead",{className:"bg-gray-50 text-gray-500 font-bold border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Description"}),(0,a.jsx)("th",{className:"px-6 py-4 text-center",children:"Category"}),(0,a.jsx)("th",{className:"px-6 py-4 text-right",children:"Amount"}),(0,a.jsx)("th",{className:"px-6 py-4 text-center",children:"Actions"})]})}),(0,a.jsxs)("tbody",{className:"divide-y divide-gray-100",children:[h.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors group",children:[(0,a.jsx)("td",{className:"px-6 py-4 text-gray-600 whitespace-nowrap",children:(0,c.GP)(new Date(e.date),"MMM dd, yyyy")}),(0,a.jsxs)("td",{className:"px-6 py-4 font-bold text-gray-800",children:[e.description,e.notes&&(0,a.jsx)("p",{className:"text-xs text-gray-400 font-normal mt-0.5",children:e.notes})]}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("span",{className:"inline-flex px-2.5 py-1 rounded-md text-xs font-medium border\n                                            ".concat("opex"===r?"bg-lime-50 text-lime-700 border-lime-100":"bg-purple-50 text-purple-700 border-purple-100"),children:e.category})}),(0,a.jsx)("td",{className:"px-6 py-4 text-right font-bold text-gray-900",children:t(e.amount)}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,a.jsx)("button",{onClick:()=>N(e._id),className:"p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,a.jsx)(i.A,{className:"w-4 h-4"})})})})]},e._id)),0===h.length&&!g&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-400",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,a.jsx)("div",{className:"p-4 rounded-full bg-gray-50",children:"opex"===r?(0,a.jsx)(s.A,{className:"w-8 h-8 opacity-20"}):(0,a.jsx)(l.A,{className:"w-8 h-8 opacity-20"})}),(0,a.jsxs)("p",{className:"font-medium",children:["No ","opex"===r?"OpEx":"CapEx"," records found."]})]})})})]})]})})})]})}},7218:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2115);let n=a.forwardRef(function(e,t){let{title:r,titleId:n,...s}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))})},7279:(e,t,r)=>{Promise.resolve().then(r.bind(r,7048))},9554:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2115);let n=a.forwardRef(function(e,t){let{title:r,titleId:n,...s}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},s),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))})},9749:(e,t,r)=>{"use strict";r.d(t,{t:()=>n});var a=r(2115);let n=()=>{let[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(!0),[s,l]=(0,a.useState)(null),o="/api";return(0,a.useEffect)(()=>{(async()=>{if(!o)return n(!1);try{let n=await fetch("".concat(o,"/settings"));if(n.ok){var e,r,a,s,i,c,d;let l=await n.json();t({storeName:l.name||"",storeAddress:(null==(e=l.address)?void 0:e.street)||"",currency:l.currency||"PHP",taxRate:void 0!==l.tax_rate?Number(l.tax_rate):.08,enableNotifications:null==(d=null==(r=l.settings)?void 0:r.enableNotifications)||d,receiptHeader:(null==(a=l.receipt)?void 0:a.header)||"",receiptFooter:(null==(s=l.receipt)?void 0:s.footer)||"",printerName:(null==(i=l.receipt)?void 0:i.printerName)||"",theme:(null==(c=l.settings)?void 0:c.theme)||"light"})}else l("Failed to fetch settings")}catch(e){console.error(e),l("Error fetching settings")}finally{n(!1)}})()},[o]),{settings:e,loading:r,error:s,formatCurrency:t=>{let r=(null==e?void 0:e.currency)==="USD"?"$":(null==e?void 0:e.currency)==="EUR"?"€":"₱";return"".concat(r).concat(t.toFixed(2))},getCurrencySymbol:()=>e?"USD"===e.currency?"$":"EUR"===e.currency?"€":"₱":"₱"}}}},e=>{e.O(0,[4932,8441,1255,7358],()=>e(e.s=7279)),_N_E=e.O()}]);