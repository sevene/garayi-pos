(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6631],{367:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(5155),n=r(2115),l=r(7650),s=r(5748),o=r(6059);function i(e){let{options:t,value:r,onChange:i,placeholder:c="Select an option",label:d,className:u="",disabled:m=!1,required:h=!1,error:x=!1,name:g,id:p}=e,[f,b]=(0,n.useState)(!1),w=(0,n.useRef)(null),y=(0,n.useRef)(null),[v,j]=(0,n.useState)({top:0,left:0,width:0}),N=p||g,k=()=>{if(w.current){let e=w.current.getBoundingClientRect();j({top:e.bottom+window.scrollY,left:e.left+window.scrollX,width:e.width})}};(0,n.useEffect)(()=>{let e=e=>{let t=e.target,r=w.current&&w.current.contains(t),a=y.current&&y.current.contains(t);r||a||b(!1)},t=e=>{let t=e.target;f&&y.current&&!y.current.contains(t)&&b(!1)},r=()=>{f&&k()};return document.addEventListener("mousedown",e),window.addEventListener("scroll",t,!0),window.addEventListener("resize",r),()=>{document.removeEventListener("mousedown",e),window.removeEventListener("scroll",t,!0),window.removeEventListener("resize",r)}},[f]),(0,n.useEffect)(()=>{f&&k()},[f]);let E=t.find(e=>e.value===r),L=(0,a.jsx)("div",{ref:y,className:"fixed z-9999 bg-white shadow-xl rounded-lg text-base ring-1 ring-gray-200 ring-opacity-5 overflow-hidden focus:outline-none sm:text-sm mt-1",style:{top:v.top,left:v.left,width:v.width},children:(0,a.jsx)("div",{className:"max-h-60 overflow-auto py-1",children:0===t.length?(0,a.jsx)("div",{className:"cursor-default select-none relative py-2 px-3 text-gray-500 text-center",children:"No options available."}):t.map(e=>(0,a.jsxs)("div",{className:"cursor-pointer select-none relative py-2 pl-3 pr-9 text-left hover:bg-lime-50 transition-colors ".concat(r===e.value?"bg-lime-50 text-lime-900 font-medium":"text-neutral-500"),onClick:t=>{t.stopPropagation(),i(e.value),b(!1)},children:[(0,a.jsx)("span",{className:"block truncate",children:e.label}),r===e.value&&(0,a.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-4 text-lime-600",children:(0,a.jsx)(s.A,{className:"h-5 w-5","aria-hidden":"true"})})]},e.value))})});return(0,a.jsxs)("div",{className:"relative w-full ".concat(u),ref:w,children:[d&&(0,a.jsxs)("label",{htmlFor:N,className:"block text-sm font-medium text-gray-700 mb-1",children:[d,h&&(0,a.jsx)("span",{className:"text-red-500 ml-0.5",children:"*"})]}),(0,a.jsxs)("button",{id:N,type:"button",onClick:()=>!m&&b(!f),disabled:m,className:"w-full flex items-center justify-between px-3 py-2 border rounded-lg bg-white text-left text-sm transition-all\n                    ".concat(m?"bg-gray-50 text-gray-400 cursor-not-allowed":"cursor-pointer","\n                    ").concat(x?" ring-2 ring-red-500/20 border-red-300 bg-red-50 hover:border-red-400":"border-gray-200 hover:border-gray-300","\n                    ").concat(f?"ring-2 ring-lime-500/20 border-lime-500 outline-none":"","\n                "),children:[(0,a.jsx)("span",{className:"block truncate ".concat(E?"text-gray-900":"text-gray-400"),children:E?E.label:c}),(0,a.jsx)(o.A,{className:"w-5 h-5 text-gray-400 transition-transform ".concat(f?"rotate-180":"")})]}),f&&!m&&"undefined"!=typeof document&&(0,l.createPortal)(L,document.body)]})}},460:(e,t,r)=>{"use strict";function a(e){let t=new Map,r=[];return e.forEach(e=>{t.set(e._id,{...e,children:[]})}),e.forEach(e=>{let a=t.get(e._id);if(e.parentId){let n=t.get(e.parentId);n?(n.children=n.children||[],n.children.push(a)):r.push(a)}else r.push(a)}),r}function n(e){let t=a(e),r=[];return!function e(t){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t.forEach(t=>{r.push({value:t._id,label:a+t.name,isSubcategory:!!t.parentId}),t.children&&t.children.length>0&&e(t.children,a+"  ")})}(t),r}r.d(t,{F:()=>n,N:()=>a})},874:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2115);let n=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))})},1682:(e,t,r)=>{Promise.resolve().then(r.bind(r,3700))},2507:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(5155);function n(e){let{title:t,description:r,className:n=""}=e;return(0,a.jsxs)("div",{className:"relative ".concat(n),children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:t}),r&&(0,a.jsx)("p",{className:"text-base font-normal text-gray-700 mt-2 tracking-wide",children:r})]})}r(2115)},3700:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(5155),n=r(2115),l=r(9537),s=r(8688),o=r(9554),i=r(8592),c=r(874),d=r(460),u=r(8720),m=r(2507),h=r(367),x=r(6473);let g={_id:"",name:"",description:"",parentId:null,active:!0};function p(){let[e,t]=(0,n.useState)([]),[r,p]=(0,n.useState)(!0),[f,b]=(0,n.useState)(g),[w,y]=(0,n.useState)(!1),[v,j]=(0,n.useState)(!1),[N,k]=(0,n.useState)(null),E=(0,n.useCallback)(async()=>{try{p(!0);let e="/api";if(!e)throw Error("API URL not configured");let r=await fetch("".concat(e,"/categories"));if(r.ok){let e=await r.json();t(e)}else console.warn("Failed to fetch categories"),t([])}catch(e){console.error("Failed to fetch categories",e),t([])}finally{p(!1)}},[]);(0,n.useEffect)(()=>{E()},[E]);let L=()=>{b(g),y(!1),k(null)},C=e=>{let{name:t,value:r}=e.target;b(e=>({...e,[t]:"parentId"===t&&""===r?null:r}))},A=async(e,r)=>{if(confirm('Delete category "'.concat(r,'"?')))try{let r="/api";if(!r)throw Error("API URL not configured");if(!(await fetch("".concat(r,"/categories/").concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete");t(t=>t.filter(t=>t._id!==e)),f._id===e&&L(),u.oR.success("Category deleted.")}catch(e){console.error(e),u.oR.error("Error deleting category.")}},S=async e=>{if(e.preventDefault(),!v){j(!0),k(null);try{let e="/api";if(!e)throw Error("API URL not configured");let t=w?"".concat(e,"/categories/").concat(f._id):"".concat(e,"/categories"),{_id:r,...a}=f;if(!(await fetch(t,{method:w?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w?f:a)})).ok)throw Error("Failed to save");await E(),L(),u.oR.success("Category ".concat(w?"updated":"created"," successfully."))}catch(e){console.error(e),k("Failed to save category. Please try again."),u.oR.error("Failed to save category. Please try again.")}finally{j(!1)}}},R=(0,d.N)(e),_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.children&&e.children.length>0;return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition",children:[(0,a.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",style:{paddingLeft:"".concat(24*t,"px")},children:[t>0&&(0,a.jsx)(l.A,{className:"w-4 h-4 text-gray-400"}),(0,a.jsx)("span",{children:e.name}),t>0?(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-700",children:"Subcategory"}):(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium bg-purple-100 text-purple-700",children:"Parent"})]})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-500 truncate max-w-xs",children:e.description||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(e.active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-500"),children:e.active?"Active":"Inactive"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>{b(e),y(!0),k(null),window.scrollTo({top:0,behavior:"smooth"})},className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-full transition",children:(0,a.jsx)(s.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>A(e._id,e.name),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-full transition",children:(0,a.jsx)(o.A,{className:"w-5 h-5"})})]})})]}),r&&e.children.map(e=>_(e,t+1)),r&&(0,a.jsx)("tr",{className:"border-b border-gray-100",children:(0,a.jsx)("td",{colSpan:4,className:"p-0"})})]},e._id)},O=e.filter(e=>!e.parentId);return(0,a.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-1000 lg:px-6 lg:pb-6",children:[(0,a.jsx)(m.A,{title:"Categories",description:"Organize your products into categories and subcategories."}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8 items-start",children:[(0,a.jsxs)("div",{className:"w-full lg:flex-1 bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"p-4 border-b border-gray-100 bg-gray-50 flex justify-between items-center",children:[(0,a.jsxs)("h2",{className:"font-semibold text-gray-700 flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"w-5 h-5"}),"Categories"]}),(0,a.jsx)("button",{onClick:E,className:"text-gray-400 hover:text-gray-600",title:"Refresh",children:(0,a.jsx)(c.A,{className:"w-5 h-5"})})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full text-left border-collapse",children:[(0,a.jsx)("thead",{className:"bg-gray-50 text-xs uppercase text-gray-500 font-semibold",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3",children:"Description"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-center",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:r?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"p-6 text-center text-gray-500",children:"Loading..."})}):0===e.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"p-6 text-center text-gray-500",children:"No categories found."})}):R.map(e=>_(e))})]})})]}),(0,a.jsx)("div",{className:"w-full lg:w-96 shrink-0",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg sticky top-6 overflow-hidden",children:[(0,a.jsx)("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:(0,a.jsx)("h2",{className:"font-semibold text-gray-800",children:w?"Edit Category":"Create New Category"})}),(0,a.jsxs)("form",{onSubmit:S,className:"p-5 space-y-4",children:[N&&(0,a.jsx)("div",{className:"p-3 bg-red-100 text-red-700 text-sm rounded-lg border border-red-200",children:N}),(0,a.jsx)("div",{children:(0,a.jsx)(x.A,{label:"Name",name:"name",value:f.name||"",onChange:C,required:!0,placeholder:"e.g. Coffee"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.A,{label:"Parent Category (Optional)",value:f.parentId||"",onChange:e=>b(t=>({...t,parentId:""===e?null:String(e)})),options:[{label:"None (Top-level)",value:""},...O.filter(e=>e._id!==f._id).map(e=>({label:e.name,value:e._id}))],placeholder:"Select a parent category"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Select a parent to create a subcategory"})]}),(0,a.jsx)("div",{children:(0,a.jsx)(x.A,{label:"Description",name:"description",value:f.description||"",onChange:C,multiline:!0,rows:3,placeholder:"Short description..."})}),(0,a.jsxs)("div",{className:"pt-2 flex gap-3",children:[w&&(0,a.jsx)("button",{type:"button",onClick:L,className:"flex-1 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition font-medium",disabled:v,children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-lime-500 text-white rounded-lg hover:bg-lime-600 transition font-medium shadow-md shadow-green-200 disabled:opacity-70 disabled:cursor-not-allowed",disabled:v,children:v?"Saving...":w?"Update":"Create"})]})]})]})})]})]})}},5748:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2115);let n=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))})},6059:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2115);let n=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))})},6473:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(5155);function n(e){let{label:t,className:r="",error:n=!1,disabled:l=!1,required:s=!1,multiline:o=!1,id:i,...c}=e,d=i||c.name;return(0,a.jsxs)("div",{className:"w-full ".concat(r),children:[t&&(0,a.jsxs)("label",{htmlFor:d,className:"block text-sm font-medium text-gray-700 mb-1",children:[t,s&&(0,a.jsx)("span",{className:"text-red-500 ml-0.5",children:"*"})]}),o?(0,a.jsx)("textarea",{id:d,disabled:l,required:s,className:"\n                        w-full px-3 py-2 text-sm border rounded-lg outline-none transition-all duration-200\n                        text-gray-900 placeholder-gray-400 min-h-20 resize-y\n                        ".concat(l?"bg-gray-50 text-gray-400 cursor-not-allowed border-gray-200":"bg-white","\n                        ").concat(n?"border-red-300 ring-4 ring-red-500/10 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 hover:border-gray-300 focus:border-lime-500 focus:ring-4 focus:ring-lime-500/10","\n                    "),...c}):(0,a.jsx)("input",{id:d,disabled:l,required:s,className:"\n                        w-full px-3 py-2 text-sm border rounded-lg outline-none transition-all duration-200\n                        text-gray-900 placeholder-gray-400\n                        ".concat(l?"bg-gray-50 text-gray-400 cursor-not-allowed border-gray-200":"bg-white","\n                        ").concat(n?"border-red-300 ring-4 ring-red-500/10 focus:border-red-500 focus:ring-red-500/20":"border-gray-200 hover:border-gray-300 focus:border-lime-500 focus:ring-4 focus:ring-lime-500/10","\n                    "),...c})]})}r(2115)},8592:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2115);let n=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6Z"}))})},8688:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2115);let n=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))})},9537:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2115);let n=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))})},9554:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(2115);let n=a.forwardRef(function(e,t){let{title:r,titleId:n,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},l),r?a.createElement("title",{id:n},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))})}},e=>{e.O(0,[8720,8441,1255,7358],()=>e(e.s=1682)),_N_E=e.O()}]);