(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6255],{874:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(2115);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))})},2144:(e,t,r)=>{"use strict";function s(e){let t=(e.products||[]).reduce((e,t)=>e+t.quantity*t.unitCost,0),r=e.laborCost;"percentage"===e.laborCostType&&(r=e.servicePrice*e.laborCost/100);let s=t+r,a=e.servicePrice-s,n=e.servicePrice>0?(a/e.servicePrice*100).toFixed(2)+"%":"0%";return{materialCost:t,laborCost:r,totalCost:s,profitMargin:a,profitPercentage:n}}r.d(t,{w:()=>s})},2507:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(5155);function a(e){let{title:t,description:r,className:a=""}=e;return(0,s.jsxs)("div",{className:"relative ".concat(a),children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:t}),r&&(0,s.jsx)("p",{className:"text-base font-normal text-gray-700 mt-2 tracking-wide",children:r})]})}r(2115)},3065:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(2115);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))})},7218:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(2115);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))})},8018:(e,t,r)=>{Promise.resolve().then(r.bind(r,8627))},8627:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>j});var s=r(5155),a=r(2115),n=r(2619),l=r.n(n),i=r(3065),c=r(8968),o=r(9537),d=r(8688),x=r(9554),m=r(7218);let u=a.forwardRef(function(e,t){let{title:r,titleId:s,...n}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},n),r?a.createElement("title",{id:s},r):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"}))});var h=r(874),p=r(2144),f=r(9749),g=r(8720),v=r(2507);function j(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!0),[j,y]=(0,a.useState)(""),{formatCurrency:b}=(0,f.t)(),w=(0,a.useCallback)(async()=>{try{n(!0);let e="/api";if(!e)throw Error("API URL not configured");let r=await fetch("".concat(e,"/services"));if(r.ok){let e=await r.json();t(e)}}catch(e){console.error("Failed to fetch data",e)}finally{n(!1)}},[]);(0,a.useEffect)(()=>{w()},[w]);let N=async(e,r)=>{if(confirm('Delete service "'.concat(r,'"?')))try{let r="/api";if(!r)throw Error("API URL not configured");if(!(await fetch("".concat(r,"/services/").concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete");t(t=>t.filter(t=>t._id!==e)),g.oR.success("Service deleted.")}catch(e){console.error(e),g.oR.error("Error deleting service.")}},k=e=>{var t,r,n,m;let{service:u}=e,h=(0,p.w)(u),f=u.variants&&u.variants.length>0,[g,v]=(0,a.useState)(!1),j=b(u.servicePrice);if(f&&u.variants){let e=u.variants.map(e=>Number(e.price)||0),t=Math.min(...e),r=Math.max(...e);j=t===r?b(t):"".concat(b(t)," - ").concat(b(r))}let y=(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,s.jsx)("span",{className:"text-gray-700",children:b(h.profitMargin)}),h.profitMargin>=0?(0,s.jsx)(i.A,{className:"w-4 h-4 text-green-600"}):(0,s.jsx)(c.A,{className:"w-4 h-4 text-red-600"})]});if(f&&u.variants){let e=u.variants.map(e=>{let t=Number(e.price)||0,r=(e.products||[]).reduce((e,t)=>e+t.quantity*t.unitCost,0),s=Number(u.laborCost)||0;"percentage"===u.laborCostType&&(s=t*s/100);let a=t-(r+s);return{profit:a,margin:t>0?a/t*100:0}}),t=e.map(e=>e.profit),r=Math.min(...t),a=Math.max(...t);null==(n=e.find(e=>e.profit===r))||n.margin,null==(m=e.find(e=>e.profit===a))||m.margin,y=(0,s.jsx)("div",{className:"flex flex-col",children:r===a?(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,s.jsx)("span",{className:"text-gray-600",children:b(r)}),r>=0?(0,s.jsx)(i.A,{className:"w-4 h-4 text-green-600"}):(0,s.jsx)(c.A,{className:"w-4 h-4 text-red-600"})]}):(0,s.jsxs)("div",{className:"flex items-center justify-center gap-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1 justify-center",children:[(0,s.jsx)("span",{className:"text-gray-600",children:b(r)}),r>=0?(0,s.jsx)(i.A,{className:"w-4 h-4 text-green-600"}):(0,s.jsx)(c.A,{className:"w-4 h-4 text-red-600"})]}),(0,s.jsx)("div",{className:"text-xs text-gray-400 text-center w-4",children:"-"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"text-gray-600",children:b(a)}),a>=0?(0,s.jsx)(i.A,{className:"w-4 h-4 text-green-600"}):(0,s.jsx)(c.A,{className:"w-4 h-4 text-red-600"})]})]})})}return(0,s.jsxs)(a.Fragment,{children:[(0,s.jsxs)("tr",{onClick:()=>{f&&v(!g)},className:"hover:bg-lime-50/50 transition border-b border-gray-100 last:border-0 ".concat(f?"cursor-pointer":""),children:[(0,s.jsx)("td",{className:"px-6 py-4 font-medium text-gray-700",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:f?"font-semibold":"",children:u.name}),f&&(0,s.jsxs)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full",children:[null==(t=u.variants)?void 0:t.length," variants"]}),f&&(0,s.jsx)("div",{className:"p-1 text-gray-500 transition",children:(0,s.jsx)(o.A,{className:"w-4 h-4 transform transition-transform ".concat(g?"rotate-90":"")})})]})}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600 text-center",children:j}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600 text-center",children:f?(0,s.jsx)("span",{className:"text-gray-400 text-xs italic",children:"(see details below)"}):b(h.materialCost)}),(0,s.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600 text-center justify-center",children:y}),(0,s.jsx)("td",{className:"px-6 py-4 text-center",children:(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(u.active?"bg-lime-100 text-lime-800":"bg-gray-100 text-gray-500"),children:u.active?"Active":"Inactive"})}),(0,s.jsx)("td",{className:"px-6 py-4 text-center",children:(0,s.jsxs)("div",{className:"flex justify-center gap-2",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)(l(),{href:"/admin/services/".concat(u._id),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded-full transition",children:(0,s.jsx)(d.A,{className:"w-5 h-5"})}),(0,s.jsx)("button",{onClick:()=>N(u._id,u.name),className:"p-1.5 text-red-600 hover:bg-red-50 rounded-full transition",children:(0,s.jsx)(x.A,{className:"w-5 h-5"})})]})})]}),f&&g&&(null==(r=u.variants)?void 0:r.map((e,t)=>{let r=Number(e.price)||0,a=(e.products||[]).reduce((e,t)=>e+t.quantity*t.unitCost,0),n=Number(u.laborCost)||0;"percentage"===u.laborCostType&&(n=r*n/100);let l=a+n,i=r-l,c=r>0?(i/r*100).toFixed(2)+"%":"0%";return(0,s.jsxs)("tr",{className:"bg-white hover:bg-lime-50/50 transition border-b border-gray-100 last:border-0",children:[(0,s.jsx)("td",{className:"px-6 py-3 text-sm text-gray-600",children:(0,s.jsx)("div",{className:"pl-8 flex items-center gap-2",children:(0,s.jsx)("span",{children:e.name})})}),(0,s.jsx)("td",{className:"px-6 py-3 text-sm text-gray-600 text-center",children:b(r)}),(0,s.jsx)("td",{className:"px-6 py-3 text-sm text-gray-600 text-center",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("span",{children:b(l)}),(0,s.jsxs)("span",{className:"text-[10px] text-gray-400",children:["(Mat: ",b(a)," + Lab: ",b(n),")"]})]})}),(0,s.jsx)("td",{className:"px-6 py-3 text-sm text-center",children:(0,s.jsxs)("div",{className:"flex gap-1 justify-center items-baseline",children:[(0,s.jsx)("span",{className:"text-gray-600",children:b(i)}),(0,s.jsx)("span",{className:"text-[11px] font-bold ".concat(i>=0?"text-green-600":"text-red-600"),children:c})]})}),(0,s.jsx)("td",{className:"px-6 py-3 text-center"}),(0,s.jsx)("td",{className:"px-6 py-3 text-center"})]},"".concat(u._id,"-v-").concat(t))}))]})},E=e.filter(e=>{var t;let r=j.toLowerCase(),s=e.name.toLowerCase().includes(r),a=null==(t=e.variants)?void 0:t.some(e=>e.name.toLowerCase().includes(r));return s||a});return(0,s.jsxs)("div",{className:"space-y-6 animate-in fade-in duration-1000 lg:px-6 lg:pb-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-end",children:[(0,s.jsx)(v.A,{title:"Services",description:"Manage services with product recipes and pricing"}),(0,s.jsxs)(l(),{href:"/admin/services/new",className:"flex items-center gap-2 px-4 py-2 bg-lime-500 text-white font-medium rounded-lg hover:bg-lime-600 hover:shadow-md hover:shadow-lime-200 transition",children:[(0,s.jsx)(m.A,{className:"w-5 h-5"}),"Create Service"]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[(0,s.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[(0,s.jsxs)("h2",{className:"font-semibold text-gray-700 flex items-center gap-2",children:[(0,s.jsx)(u,{className:"w-5 h-5"}),"Services List"]}),(0,s.jsxs)("div",{className:"flex items-center gap-5",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search",value:j,onChange:e=>y(e.target.value),className:"border-b border-transparent px-3 py-1 text-sm text-gray-500 hover:border-b-gray-200 hover:text-gray-900 focus:outline-none focus:border-lime-400 transition-all"}),(0,s.jsx)("button",{onClick:w,className:"text-gray-400 hover:text-gray-600 transition-colors",title:"Refresh",children:(0,s.jsx)(h.A,{className:"w-5 h-5"})})]})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full text-left border-collapse",children:[(0,s.jsx)("thead",{className:"bg-gray-50 text-xs uppercase text-gray-500 font-semibold",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-6 py-3",children:"Name"}),(0,s.jsx)("th",{className:"px-6 py-3 text-center",children:"Price"}),(0,s.jsx)("th",{className:"px-6 py-3 text-center",children:"Prime Cost"}),(0,s.jsx)("th",{className:"px-6 py-3 text-center",children:"Profit"}),(0,s.jsx)("th",{className:"px-6 py-3 text-center",children:"Status"}),(0,s.jsx)("th",{className:"px-6 py-3 text-center",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:r?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"p-6 text-center text-gray-500",children:"Loading..."})}):0===E.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:6,className:"p-6 text-center text-gray-500",children:"No services found."})}):E.map(e=>(0,s.jsx)(k,{service:e},e._id))})]})})]})]})}},8688:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(2115);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"}))})},8968:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(2115);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"}))})},9537:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(2115);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))})},9554:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(2115);let a=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))})},9749:(e,t,r)=>{"use strict";r.d(t,{t:()=>a});var s=r(2115);let a=()=>{let[e,t]=(0,s.useState)(null),[r,a]=(0,s.useState)(!0),[n,l]=(0,s.useState)(null),i="/api";return(0,s.useEffect)(()=>{(async()=>{if(!i)return a(!1);try{let a=await fetch("".concat(i,"/settings"));if(a.ok){var e,r,s,n,c,o,d;let l=await a.json();t({storeName:l.name||"",storeAddress:(null==(e=l.address)?void 0:e.street)||"",currency:l.currency||"PHP",taxRate:void 0!==l.tax_rate?Number(l.tax_rate):.08,enableNotifications:null==(d=null==(r=l.settings)?void 0:r.enableNotifications)||d,receiptHeader:(null==(s=l.receipt)?void 0:s.header)||"",receiptFooter:(null==(n=l.receipt)?void 0:n.footer)||"",printerName:(null==(c=l.receipt)?void 0:c.printerName)||"",theme:(null==(o=l.settings)?void 0:o.theme)||"light"})}else l("Failed to fetch settings")}catch(e){console.error(e),l("Error fetching settings")}finally{a(!1)}})()},[i]),{settings:e,loading:r,error:n,formatCurrency:t=>{let r=(null==e?void 0:e.currency)==="USD"?"$":(null==e?void 0:e.currency)==="EUR"?"€":"₱";return"".concat(r).concat(t.toFixed(2))},getCurrencySymbol:()=>e?"USD"===e.currency?"$":"EUR"===e.currency?"€":"₱":"₱"}}}},e=>{e.O(0,[8720,2619,8441,1255,7358],()=>e(e.s=8018)),_N_E=e.O()}]);